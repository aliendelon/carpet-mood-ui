<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mood Control Panel</title>
  <style>
    body {
  font-family: "Inter", sans-serif;
  max-width: 650px;
  margin: 40px auto;
  padding: 24px;
  background-color: #f8f8f8;
  color: #333;
  border-radius: 14px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
}

h2 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 1.6rem;
}

.slider-group {
  margin-bottom: 20px;
}

label {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
  font-weight: 300;
}

input[type="range"] {
  width: 100%;
}

.layout-group {
  margin-top: 20px;
  margin-bottom: 20px;
  font-weight: bold;
}

.layout-group label {
  display: inline-block;
  margin-right: 10px;
}

button {
  margin-top: 20px;
  width: 100%;
  padding: 14px;
  font-size: 16px;
  font-weight: 600;
  background: linear-gradient(135deg, #0066ff, #3388ff);
  color: white;
  border: 2px solid;
  border-radius: 0px;
  cursor: pointer;
  transition: all 0.3s ease;
}

button:hover {
  background-color: darkturquoise;
}

.night-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 20px;
  font-weight: bold;
}

/* Phase toggles row */

.phase-toggles {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin: 25px 0;
}

.phase-btn {
  padding: 10px;
  font-size: 15px;
  font-weight: 300;
  border: none;
  border-radius: 0px;
  background-color: #eee;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: center;
  border-style: solid;
  border-width: 2px;
  font-family: "Inter", sans-serif;
  transition: all 0.3s ease;
}

.phase-btn:hover {
  background-color: #fff;
  color: #fff;
}

@media (prefers-color-scheme: dark) {
  body {
    background-color: #1a1a1a;
    color: #ddd;
  }
}

@media (prefers-color-scheme: dark) {
  button {
    background: transparent;
  }
}

@media (prefers-color-scheme: dark) {
  button:hover {
    background: linear-gradient(135deg, #1f6fd0, #195a9e);
  }
}

@media (prefers-color-scheme: dark) {
  .phase-btn {
    background-color: var(--bs-border-color-translucent);
    color: #ddd;
  }
}

@media (prefers-color-scheme: dark) {
  .phase-btn:hover {
    background-color: #fff;
    color: #fff;
  }
}

/* ********** Baseline, reset styles ********** */

input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

/* Removes default focus */

input[type="range"]:focus {
  outline: none;
}

/* ******* Chrome, Safari, Opera and Edge Chromium styles ******* */

/* slider track */

input[type="range"]::-webkit-slider-runnable-track {
  background-color: #ffffff;
  border-radius: 0rem;
  height: .8rem;
}

/* slider thumb */

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  margin-top: 0px;
  background-color: #000000;
  border-radius: 0rem;
  height: .8rem;
  width: 1rem;
}

input[type="range"]:focus::-webkit-slider-thumb {
  outline: 3px solid #000000;
  outline-offset: 0.125rem;
}

/* ********** Firefox styles ********** */

/* slider track */

input[type="range"]::-moz-range-track {
  background-color: #ffffff;
  border-radius: 0rem;
  height: .8rem;
}

/* slider thumb */

input[type="range"]::-moz-range-thumb {
  background-color: #000000;
  border: none;
  border-radius: 0rem;
  height: .8rem;
  width: 1rem;
}

input[type="range"]:focus::-moz-range-thumb {
  outline: 3px solid #000000;
  outline-offset: 0.125rem;
}
	  
.phase-btn.active {
  background-color: #0066ff;
  color: #fff;
}

  </style>
</head>
<body>
  <h2>Mood Input Panel</h2>

  <!-- Sliders -->
  <div class="slider-group">
    <label for="happiness">Happiness: <span id="happiness-value">50</span></label>
    <input type="range" id="happiness" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="energy">Energy: <span id="energy-value">50</span></label>
    <input type="range" id="energy" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="calmness">Calmness: <span id="calmness-value">50</span></label>
    <input type="range" id="calmness" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="pain">Pain: <span id="pain-value">0</span></label>
    <input type="range" id="pain" min="0" max="100" value="0" />
  </div>

  <!-- Quick Phase Toggles -->
  <div class="phase-toggles">
    <button class="phase-btn" onclick="setPhase('creative')">Creative Thinking</button>
    <button class="phase-btn" onclick="setPhase('rest')">Rest</button>
    <button class="phase-btn" onclick="setPhase('observation')">Observation</button>
    <button class="phase-btn" onclick="setPhase('memory')">Memory</button>
    <button class="phase-btn" onclick="setPhase('conflict')">Conflict</button>
    <button class="phase-btn" onclick="setPhase('transformation')">Transformation</button>
    <button class="phase-btn" id="nightBtn">Night</button>
  </div>

  <!-- Layout -->
  <div class="layout-group" style="display:none;">
    Layout:
    <label><input type="radio" name="layout" value="layout1" checked /> layout1</label>
    <label><input type="radio" name="layout" value="layout2" /> layout2</label>
    <label><input type="radio" name="layout" value="layout3" /> layout3</label>
    <label><input type="radio" name="layout" value="layout4" /> layout4</label>
  </div>

  <button onclick="sendMood()">Send</button>

  <div class="night-toggle">
    <input type="checkbox" id="night" onchange="toggleNightMode()" hidden/>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // === Firebase Config ===
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "https://carpet-mood-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // === Send Mood and Layout to Firebase ===
    function sendMood() {
      const selectedLayout = document.querySelector('input[name="layout"]:checked').value;

      const mood = {
        happiness: parseInt(document.getElementById("happiness").value),
        energy: parseInt(document.getElementById("energy").value),
        calmness: parseInt(document.getElementById("calmness").value),
        pain: parseInt(document.getElementById("pain").value),
        timestamp: Date.now()
      };

      db.ref("mood").set(mood)
        .then(() => db.ref("current_layout_name").set(selectedLayout))
        .then(() => alert("Sent"))
        .catch((err) => alert("âŒ Error: " + err));
    }

    // === Toggle Night Override ===
    function toggleNightMode() {
      const isNight = document.getElementById("night").checked;
      db.ref("night_override")
        .set(isNight)
        .then(() => console.log("ðŸŒ™ Night override set:", isNight))
        .catch((err) => console.error("Error:", err));
    }

    // === Live UI Range Update ===
    ["happiness", "energy", "calmness", "pain"].forEach((id) => {
      const input = document.getElementById(id);
      const output = document.getElementById(`${id}-value`);
      input.addEventListener("input", () => {
        output.textContent = input.value;
      });
    });

    // === Phase Preset Logic ===
    function setPhase(phase) {
      let values = {h:50, e:50, c:50, p:0}; // defaults

      switch (phase) {
        case "creative":
          values = {h:75, e:70, c:40, p:20}; break;
        case "rest":
          values = {h:50, e:25, c:75, p:67}; break;
        case "observation":
          values = {h:55, e:40, c:70, p:20}; break;
        case "memory":
          values = {h:40, e:100, c:65, p:30}; break;
        case "conflict":
          values = {h:35, e:45, c:40, p:70}; break;
        case "intuition":
          values = {h:70, e:45, c:70, p:30}; break;
        case "transformation":
          values = {h:60, e:65, c:45, p:50}; break;
        case "emptiness":
          values = {h:25, e:20, c:40, p:20}; break;
      }

      document.getElementById("happiness").value = values.h;
      document.getElementById("energy").value = values.e;
      document.getElementById("calmness").value = values.c;
      document.getElementById("pain").value = values.p;

      document.getElementById("happiness-value").textContent = values.h;
      document.getElementById("energy-value").textContent = values.e;
      document.getElementById("calmness-value").textContent = values.c;
      document.getElementById("pain-value").textContent = values.p;
    }
	  
const nightCheckbox = document.getElementById("night");
const nightBtn = document.getElementById("nightBtn");

function applyNightState(isNight) {
  nightCheckbox.checked = isNight;
  nightBtn.classList.toggle("active", isNight);

  db.ref("night_override")
    .set(isNight)
    .then(() => console.log("Night override:", isNight))
    .catch(err => console.error(err));
}

// Button click toggles checkbox
nightBtn.addEventListener("click", () => {
  applyNightState(!nightCheckbox.checked);
});

// (Optional) If checkbox is ever changed manually
nightCheckbox.addEventListener("change", () => {
  applyNightState(nightCheckbox.checked);
});
  </script>
</body>
</html>
