<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mood Control Panel</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background-color: #f8f8f8;
      color: #333;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
    }

    .slider-group {
      margin-bottom: 20px;
    }

    label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 5px;
      font-weight: bold;
    }

    input[type="range"] {
      width: 100%;
    }

    .layout-group {
      margin-top: 20px;
      margin-bottom: 20px;
      font-weight: bold;
    }

    .layout-group label {
      display: inline-block;
      margin-right: 10px;
    }

    button {
      margin-top: 20px;
      width: 100%;
      padding: 12px;
      font-size: 16px;
      background-color: #0066ff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #004fcc;
    }

    .night-toggle {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 20px;
      font-weight: bold;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background-color: #1a1a1a;
        color: #ddd;
      }

      button {
        background-color: #3399ff;
      }

      button:hover {
        background-color: #227acc;
      }
    }
  </style>
</head>
<body>
  <h2>üéõÔ∏è Mood Input Panel</h2>

  <div class="slider-group">
    <label for="happiness">Happiness: <span id="happiness-value">50</span></label>
    <input type="range" id="happiness" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="energy">Energy: <span id="energy-value">50</span></label>
    <input type="range" id="energy" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="calmness">Calmness: <span id="calmness-value">50</span></label>
    <input type="range" id="calmness" min="0" max="100" value="50" />
  </div>

  <div class="slider-group">
    <label for="pain">Pain Level: <span id="pain-value">0</span></label>
    <input type="range" id="pain" min="0" max="100" value="0" />
  </div>

  <div class="layout-group">
    Layout:
    <label><input type="radio" name="layout" value="layout1" checked /> layout1</label>
    <label><input type="radio" name="layout" value="layout2" /> layout2</label>
    <label><input type="radio" name="layout" value="layout3" /> layout3</label>
    <label><input type="radio" name="layout" value="layout4" /> layout4</label>
  </div>

  <button onclick="sendMood()">üì§ Send Mood & Layout</button>

  <div class="night-toggle">
    <label for="night">üåô Night Mode:</label>
    <input type="checkbox" id="night" onchange="toggleNightMode()" />
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

  <script>
    // === Firebase Config ===
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "https://carpet-mood-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_BUCKET",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // === Send Mood and Layout to Firebase ===
    function sendMood() {
      const selectedLayout = document.querySelector('input[name="layout"]:checked').value;

      const mood = {
        happiness: parseInt(document.getElementById("happiness").value),
        energy: parseInt(document.getElementById("energy").value),
        calmness: parseInt(document.getElementById("calmness").value),
        pain: parseInt(document.getElementById("pain").value),
        timestamp: Date.now()
      };

      // Send mood
      db.ref("mood").set(mood)
        .then(() => {
          // Send layout
          return db.ref("current_layout_name").set(selectedLayout);
        })
        .then(() => alert("‚úÖ Mood and layout sent to Firebase!"))
        .catch((err) => alert("‚ùå Error: " + err));
    }

    // === Toggle Night Override ===
    function toggleNightMode() {
      const isNight = document.getElementById("night").checked;
      db.ref("night_override")
        .set(isNight)
        .then(() => console.log("üåô Night override set:", isNight))
        .catch((err) => console.error("Error:", err));
    }

    // === Live UI Range Update ===
    ["happiness", "energy", "calmness", "pain"].forEach((id) => {
      const input = document.getElementById(id);
      const output = document.getElementById(`${id}-value`);
      input.addEventListener("input", () => {
        output.textContent = input.value;
      });
    });
  </script>
</body>
</html>
